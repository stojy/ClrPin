<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:settings="clr-namespace:ClrVpin.Settings"
                    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
                    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                    xmlns:validationRules="clr-namespace:ClrVpin.Validation_Rules">

  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
    <ResourceDictionary Source="../Styles.xaml" />
    <ResourceDictionary Source="/Controls/FolderSelection/FolderSelection.xaml" />
  </ResourceDictionary.MergedDictionaries>

  <DataTemplate x:Key="SettingsTemplate" DataType="{x:Type settings:SettingsViewModel}">
    <StackPanel Margin="0">
      <GroupBox Margin="5, 5" Padding="5,2" Header="Visual Pinball">
        <ContentControl ContentTemplate="{StaticResource FolderSelection}" Content="{Binding PinballFolderModel}" />
      </GroupBox>

      <GroupBox Margin="5, 5" Padding="5,2" Header="Frontend">
        <StackPanel>
          <ContentControl ContentTemplate="{StaticResource FolderSelection}" Content="{Binding FrontendFolderModel}" />

          <!-- front end content folders - handled generically to make it a little simpler ot manage -->
          <StackPanel>
            <Button ToolTip="Auto assign folders suitable for 'Visual Pinball'" Width="90" Margin="5,15,0,5" HorizontalAlignment="Left" Command="{Binding AutoAssignFoldersCommand}">Auto Assign</Button>

            <ItemsControl ItemsSource="{Binding FrontendContentTypeModels}" BorderThickness="0">
              <ItemsControl.ItemTemplate>
                <DataTemplate DataType="settings:ContentTypeModel">
                  <WrapPanel Margin="0,0,0,10" Height="50">
                    <ContentControl ContentTemplate="{StaticResource FolderSelection}" Content="{Binding}" />

                    <TextBox Margin="5,0,0,0" Width="150" Style="{StaticResource TextBoxStyle}" VerticalAlignment="Top" materialDesign:HintAssist.Hint="File Extension(s)">
                      <TextBox.Text>
                        <Binding Path="Extensions" UpdateSourceTrigger="PropertyChanged">
                          <Binding.ValidationRules>
                            <validationRules:NotEmptyValidationRule ValidatesOnTargetUpdated="True" />
                          </Binding.ValidationRules>
                        </Binding>
                      </TextBox.Text>
                      <b:Interaction.Triggers>
                        <b:EventTrigger EventName="TextChanged">
                          <b:InvokeCommandAction Command="{Binding TextChangedCommand}" />
                        </b:EventTrigger>
                      </b:Interaction.Triggers>
                    </TextBox>
                  </WrapPanel>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </StackPanel>
        </StackPanel>
      </GroupBox>

      <GroupBox Margin="5, 5" Padding="5,2" Header="General">
        <StackPanel>
          <ContentControl ContentTemplate="{StaticResource FolderSelection}" Content="{Binding BackupFolderModel}" />

          <WrapPanel Margin="5">
            <ToggleButton ToolTip="When enabled, all file operations are ignored. No files will be copied, moved, renamed, or deleted." IsChecked="{Binding Settings.TrainerWheels}" />
            <TextBlock Margin="10,0,0,0" Text="Trainer Wheels"/>
          </WrapPanel>

          <Button ToolTip="Reset the entire config to their installation values" Width="90" Margin="5,15,0,5" HorizontalAlignment="Left" Command="{Binding ResetCommand}">Reset</Button>
        </StackPanel>
      </GroupBox>

    </StackPanel>

  </DataTemplate>

</ResourceDictionary>